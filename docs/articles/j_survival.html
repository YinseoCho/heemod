<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Survival models • heemod</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Survival models">
<meta property="og:description" content="heemod">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">heemod</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.14.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/pierucci/heemod/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="j_survival_files/accessible-code-block-0.0.1/empty-anchor.js"></script><link href="j_survival_files/anchor-sections-1.0/anchor-sections.css" rel="stylesheet">
<script src="j_survival_files/anchor-sections-1.0/anchor-sections.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Survival models</h1>
            
            <h4 class="date">2020-12-07</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/pierucci/heemod/blob/master/vignettes/j_survival.Rmd"><code>vignettes/j_survival.Rmd</code></a></small>
      <div class="hidden name"><code>j_survival.Rmd</code></div>

    </div>

    
    
<div id="distributions" class="section level2">
<h2 class="hasAnchor">
<a href="#distributions" class="anchor"></a>Distributions</h2>
<p>The <code>heemod</code> package provides a number of ways to estimate transition probabilities from survival distributions. Survival distributions can come from at least three different sources:</p>
<ul>
<li>User-definded parametric distributions.</li>
<li>Fitted parametric distributions with <code><a href="https://rdrr.io/pkg/flexsurv/man/flexsurvreg.html">flexsurv::flexsurvreg()</a></code>.</li>
<li>Fitted Kaplan-Meiers with <code><a href="https://rdrr.io/pkg/survival/man/survfit.html">survival::survfit()</a></code>.</li>
</ul>
<p>Once defined, each of these types of distributions can be combined and modified using a standard set of operations.</p>
<p>User-defined parametric distributions are created using the <code><a href="../reference/define_survival.html">define_survival()</a></code> and <code><a href="../reference/define_spline_survival.html">define_spline_survival()</a></code> functions:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">surv_dist_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_survival.html">define_survival</a></span><span class="op">(</span>
  distribution <span class="op">=</span> <span class="st">"exp"</span>,
  rate <span class="op">=</span> <span class="fl">.5</span>
<span class="op">)</span>

<span class="va">surv_dist_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_spline_survival.html">define_spline_survival</a></span><span class="op">(</span>
  scale <span class="op">=</span> <span class="st">"odds"</span>,
  gamma <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">11.643</span>, <span class="fl">1.843</span>, <span class="fl">0.208</span><span class="op">)</span>,
  knots <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4.077537</span>, <span class="fl">5.883183</span>, <span class="fl">6.458338</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
<pre><code>## Le chargement a nécessité le package : flexsurv</code></pre>
<p>Fitted parametric models are created using <code><a href="https://rdrr.io/pkg/flexsurv/man/flexsurvreg.html">flexsurv::flexsurvreg()</a></code> and <code><a href="https://rdrr.io/pkg/flexsurv/man/flexsurvspline.html">flexsurv::flexsurvspline()</a></code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/chjackson/flexsurv-dev">flexsurv</a></span><span class="op">)</span></code></pre></div>
<pre><code>## Le chargement a nécessité le package : survival</code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fit_w</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/flexsurv/man/flexsurvreg.html">flexsurvreg</a></span><span class="op">(</span>
  formula <span class="op">=</span> <span class="fu">Surv</span><span class="op">(</span><span class="va">futime</span>, <span class="va">fustat</span><span class="op">)</span> <span class="op">~</span> <span class="fl">1</span>,
  data <span class="op">=</span> <span class="va">ovarian</span>, dist <span class="op">=</span> <span class="st">"weibull"</span>
<span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">fit_w</span><span class="op">)</span></code></pre></div>
<p><img src="j_survival_files/figure-html/unnamed-chunk-2-1.png" width="576"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fit_spl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/flexsurv/man/flexsurvspline.html">flexsurvspline</a></span><span class="op">(</span>
  formula <span class="op">=</span> <span class="fu">Surv</span><span class="op">(</span><span class="va">futime</span>, <span class="va">fustat</span><span class="op">)</span> <span class="op">~</span> <span class="fl">1</span>,
  data <span class="op">=</span> <span class="va">ovarian</span>,
  scale <span class="op">=</span> <span class="st">"odds"</span>,
  k<span class="op">=</span><span class="fl">1</span>
<span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">fit_spl</span><span class="op">)</span></code></pre></div>
<p><img src="j_survival_files/figure-html/unnamed-chunk-2-2.png" width="576"></p>
<p>Fitted models can include covariates. In order to use a model with covariates in heemod, you can use the <code><a href="../reference/set_covariates.html">set_covariates()</a></code> function on the fitted model and provide as additional arguments the covariate values you want to model. You can also provide a data frame of covariate levels to aggregate survival probabilites over different groups. By default, heemod will aggregate over predicted survival probabilities for each subject in the dataset to which the model was fit.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fit_cov</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/flexsurv/man/flexsurvreg.html">flexsurvreg</a></span><span class="op">(</span>
  formula <span class="op">=</span> <span class="fu">Surv</span><span class="op">(</span><span class="va">rectime</span>, <span class="va">censrec</span><span class="op">)</span> <span class="op">~</span> <span class="va">group</span>,
  dist <span class="op">=</span> <span class="st">"weibull"</span>,
  data <span class="op">=</span> <span class="va">bc</span>
<span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">fit_cov</span><span class="op">)</span></code></pre></div>
<p><img src="j_survival_files/figure-html/unnamed-chunk-3-1.png" width="576"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fitcov_good</span>   <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_covariates.html">set_covariates</a></span><span class="op">(</span><span class="va">fit_cov</span>, group <span class="op">=</span> <span class="st">"Good"</span><span class="op">)</span>
<span class="va">fitcov_medium</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_covariates.html">set_covariates</a></span><span class="op">(</span><span class="va">fit_cov</span>, group <span class="op">=</span> <span class="st">"Medium"</span><span class="op">)</span>
<span class="va">fitcov_poor</span>   <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_covariates.html">set_covariates</a></span><span class="op">(</span><span class="va">fit_cov</span>, group <span class="op">=</span> <span class="st">"Poor"</span><span class="op">)</span></code></pre></div>
<p>Similar functionality is also available for Kaplan-Meiers created using <code><a href="https://rdrr.io/pkg/survival/man/survfit.html">survival::survfit()</a></code></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/therneau/survival">survival</a></span><span class="op">)</span>

<span class="va">km_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/survfit.html">survfit</a></span><span class="op">(</span>
  formula <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html">Surv</a></span><span class="op">(</span><span class="va">futime</span>, <span class="va">fustat</span><span class="op">)</span> <span class="op">~</span> <span class="fl">1</span>,
  data <span class="op">=</span> <span class="va">ovarian</span>
<span class="op">)</span>
<span class="va">km_cov</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/survfit.html">survfit</a></span><span class="op">(</span>
  formula <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html">Surv</a></span><span class="op">(</span><span class="va">rectime</span>, <span class="va">censrec</span><span class="op">)</span> <span class="op">~</span> <span class="va">group</span>,
  data <span class="op">=</span> <span class="va">bc</span>
<span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">km_cov</span><span class="op">)</span></code></pre></div>
<p><img src="j_survival_files/figure-html/unnamed-chunk-4-1.png" width="576"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">km_good</span>   <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_covariates.html">set_covariates</a></span><span class="op">(</span><span class="va">km_cov</span>, group <span class="op">=</span> <span class="st">"Good"</span><span class="op">)</span>
<span class="va">km_medium</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_covariates.html">set_covariates</a></span><span class="op">(</span><span class="va">km_cov</span>, group <span class="op">=</span> <span class="st">"Medium"</span><span class="op">)</span>
<span class="va">km_poor</span>   <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_covariates.html">set_covariates</a></span><span class="op">(</span><span class="va">km_cov</span>, group <span class="op">=</span> <span class="st">"Poor"</span><span class="op">)</span></code></pre></div>
</div>
<div id="operations" class="section level2">
<h2 class="hasAnchor">
<a href="#operations" class="anchor"></a>Operations</h2>
<p>Once defined, treatment effects of various types can be applied to any survival distribution:</p>
<ul>
<li>Hazard ratio: <code><a href="../reference/apply_hr.html">apply_hr()</a></code>.</li>
<li>Odds ratio: <code><a href="../reference/apply_or.html">apply_or()</a></code>.</li>
<li>Acceleration factor: <code><a href="../reference/apply_af.html">apply_af()</a></code>.</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">km_poor_ph</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/apply_hr.html">apply_hr</a></span><span class="op">(</span><span class="va">km_poor</span>, hr <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>
<span class="va">km_medium_af</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/apply_af.html">apply_af</a></span><span class="op">(</span><span class="va">km_medium</span>, af <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span></code></pre></div>
<p>In addition, distributions can be combined using a variety of operations:</p>
<ul>
<li>Join survival distributions together: <code><a href="../reference/join.html">join()</a></code>.</li>
<li>Mix two (or more) survival distributions: <code><a href="../reference/mix.html">mix()</a></code>.</li>
<li>Combine two (or more) survival distributions as independent risks: <code><a href="../reference/add_hazards.html">add_hazards()</a></code>.</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">km_poor_join</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/join.html">join</a></span><span class="op">(</span>
  <span class="va">km_poor</span>,
  <span class="va">fitcov_poor</span>,
  at <span class="op">=</span> <span class="fl">365</span>
<span class="op">)</span>
<span class="va">models_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mix.html">mix</a></span><span class="op">(</span>
  <span class="va">fitcov_good</span>, <span class="va">fitcov_medium</span>, <span class="va">fitcov_poor</span>,
  weights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span><span class="op">)</span>
<span class="op">)</span>
<span class="va">combined_risks</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_hazards.html">add_hazards</a></span><span class="op">(</span>
  <span class="va">fit_w</span>, <span class="va">fitcov_good</span>
<span class="op">)</span></code></pre></div>
<p>The transition or survival probabilities are computed with <code><a href="../reference/compute_surv.html">compute_surv()</a></code>. Time (usually <code>model_time</code> or <code>state_time</code>) needs to be passed to the function as a <code>time</code> argument.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/compute_surv.html">compute_surv</a></span><span class="op">(</span><span class="va">surv_dist_2</span>, time <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 8.780223e-06 2.271877e-05 3.500128e-05 4.649850e-05 5.747782e-05</code></pre>
<p>All these operations can be chained with the <code><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></code> piping operator.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fit_cov</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/set_covariates.html">set_covariates</a></span><span class="op">(</span>group <span class="op">=</span> <span class="st">"Good"</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/apply_hr.html">apply_hr</a></span><span class="op">(</span>hr <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/join.html">join</a></span><span class="op">(</span>
    <span class="va">fitcov_poor</span>,
    at <span class="op">=</span> <span class="fl">3</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/mix.html">mix</a></span><span class="op">(</span>
    <span class="va">fitcov_medium</span>,
    weights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.75</span><span class="op">)</span>
  <span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="../reference/add_hazards.html">add_hazards</a></span><span class="op">(</span>
    <span class="va">fit_w</span>
  <span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu"><a href="../reference/compute_surv.html">compute_surv</a></span><span class="op">(</span>time <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 0.0004011356 0.0004736851 0.0005069766 0.0005490092 0.0005692261</code></pre>
</div>
<div id="applications" class="section level2">
<h2 class="hasAnchor">
<a href="#applications" class="anchor"></a>Applications</h2>
<div id="transition-matrix" class="section level3">
<h3 class="hasAnchor">
<a href="#transition-matrix" class="anchor"></a>Transition matrix</h3>
<p>For the example we define a simple model with only 1 strategy.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">param</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_parameters.html">define_parameters</a></span><span class="op">(</span>
  p1 <span class="op">=</span> <span class="fu"><a href="../reference/compute_surv.html">compute_surv</a></span><span class="op">(</span>
    <span class="va">surv_dist_1</span>,
    time <span class="op">=</span> <span class="va">model_time</span> <span class="co"># can also be state_time</span>
  <span class="op">)</span>,
  p2 <span class="op">=</span> <span class="va">km_1</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="../reference/join.html">join</a></span><span class="op">(</span><span class="va">fit_w</span>, at <span class="op">=</span> <span class="fl">730</span><span class="op">)</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="../reference/compute_surv.html">compute_surv</a></span><span class="op">(</span>
      time <span class="op">=</span> <span class="va">model_time</span>,
      cycle_length <span class="op">=</span> <span class="fl">365</span>  <span class="co"># time is in days in km_medium, in years in model_time</span>
    <span class="op">)</span>
<span class="op">)</span>

<span class="va">tm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_transition.html">define_transition</a></span><span class="op">(</span>
  <span class="va">C</span>, <span class="va">p1</span> <span class="op">-</span> <span class="va">p2</span>, <span class="va">p2</span>,
  <span class="fl">0</span>, <span class="va">C</span>,       <span class="va">p2</span>,
  <span class="fl">0</span>, <span class="fl">0</span>,       <span class="va">C</span>
<span class="op">)</span></code></pre></div>
<pre><code>## No named state -&gt; generating names.</code></pre>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">tm</span><span class="op">)</span></code></pre></div>
<pre><code>## Le chargement a nécessité le package : diagram</code></pre>
<p><img src="j_survival_files/figure-html/unnamed-chunk-9-1.png" width="576"></p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sA</span> <span class="op">&lt;-</span>  <span class="fu"><a href="../reference/define_state.html">define_state</a></span><span class="op">(</span>
  cost <span class="op">=</span> <span class="fl">10</span>, ut <span class="op">=</span> <span class="fl">1</span>
<span class="op">)</span>
<span class="va">sB</span> <span class="op">&lt;-</span>  <span class="fu"><a href="../reference/define_state.html">define_state</a></span><span class="op">(</span>
  cost <span class="op">=</span> <span class="fl">20</span>, ut <span class="op">=</span> <span class="fl">.5</span>
<span class="op">)</span>
<span class="va">sC</span> <span class="op">&lt;-</span>  <span class="fu"><a href="../reference/define_state.html">define_state</a></span><span class="op">(</span>
  cost <span class="op">=</span> <span class="fl">0</span>, ut <span class="op">=</span> <span class="fl">0</span>
<span class="op">)</span>

<span class="va">stratTM</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_strategy.html">define_strategy</a></span><span class="op">(</span>
  transition <span class="op">=</span> <span class="va">tm</span>,
  A <span class="op">=</span> <span class="va">sA</span>, B <span class="op">=</span> <span class="va">sB</span>, C <span class="op">=</span> <span class="va">sC</span>
<span class="op">)</span>

<span class="va">resTM</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_model.html">run_model</a></span><span class="op">(</span>
  parameters <span class="op">=</span> <span class="va">param</span>,
  <span class="va">stratTM</span>,
  cycles <span class="op">=</span> <span class="fl">15</span>,
  cost <span class="op">=</span> <span class="va">cost</span>, effect <span class="op">=</span> <span class="va">ut</span>
<span class="op">)</span></code></pre></div>
<pre><code>## No named model -&gt; generating names.</code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">resTM</span><span class="op">)</span></code></pre></div>
<p><img src="j_survival_files/figure-html/unnamed-chunk-10-1.png" width="576"></p>
</div>
<div id="partitioned-survival-model" class="section level3">
<h3 class="hasAnchor">
<a href="#partitioned-survival-model" class="anchor"></a>Partitioned survival model</h3>
<p>A partitioned survival model can also be computed:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ps</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_part_surv.html">define_part_surv</a></span><span class="op">(</span>
  pfs <span class="op">=</span> <span class="va">surv_dist_1</span>,
  os  <span class="op">=</span> <span class="va">km_1</span> <span class="op">%&gt;%</span>
    <span class="fu"><a href="../reference/join.html">join</a></span><span class="op">(</span><span class="va">fit_w</span>, at <span class="op">=</span> <span class="fl">730</span><span class="op">)</span>,
  cycle_length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">365</span><span class="op">)</span> <span class="co"># 1 for pfs, 365 for os</span>
<span class="op">)</span></code></pre></div>
<pre><code>## No named state -&gt; generating names.</code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">stratPS</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/define_strategy.html">define_strategy</a></span><span class="op">(</span>
  transition <span class="op">=</span> <span class="va">ps</span>,
  A <span class="op">=</span> <span class="va">sA</span>, B <span class="op">=</span> <span class="va">sB</span>, C <span class="op">=</span> <span class="va">sC</span>
<span class="op">)</span>

<span class="va">resPS</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/run_model.html">run_model</a></span><span class="op">(</span>
  <span class="va">stratPS</span>,
  cycles <span class="op">=</span> <span class="fl">15</span>,
  cost <span class="op">=</span> <span class="va">cost</span>, effect <span class="op">=</span> <span class="va">ut</span>
<span class="op">)</span></code></pre></div>
<pre><code>## No named model -&gt; generating names.</code></pre>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">resPS</span><span class="op">)</span></code></pre></div>
<p><img src="j_survival_files/figure-html/unnamed-chunk-11-1.png" width="576"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Kevin Zarca, Antoine Filipovic-Pierucci.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
